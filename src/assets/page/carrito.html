<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carrito | Level-Up Gamer</title>
  <link rel="icon" href="../img/logo.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="../CSS/style.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body>
    <header class="navbar-electric py-3">
        <div class="container d-flex justify-content-between align-items-center">
        <a href="../../index.html" class="d-flex align-items-center text-decoration-none me-3">
            <img src="../img/logo.png" alt="Logo" width="80px" height="80px" class="me-2">
            <span class="fs-4 fw-bold font-orbitron text-white">Level-Up Gamer</span>
        </a>
        <nav class="flex-grow-1">
            <ul class="nav gap-3 justify-content-center">
            <li class="nav-item"><a class="nav-link text-white" href="../../index.html">Inicio</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="catalogo.html">Productos</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="nosotros.html">Nosotros</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="blog.html">Blog</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="contacto.html">Contacto</a></li>
            </ul>
        </nav>
        <div class="d-flex align-items-center ms-auto gap-3">
         <div class="d-flex align-items-center ms-auto gap-3">
       <a href="perfilUsuario.html" class="text-white fs-5 d-flex align-items-center" style="text-decoration:none;" title="Perfil de usuario">
           <i class="bi bi-person-circle"></i>
           <span class="ms-1 d-none d-md-inline" id="header-nombre-usuario"></span>
       </a>
       <a href="carrito.html" class="text-white fs-5" style="text-decoration:none;">
           <i class="bi bi-cart"></i>
       </a>
       <span class="text-white ms-2">Carrito (<span id="badge-carrito">0</span>)</span>
      </div>
    </header>

    <main class="container carrito-main">
      <div class="row">
        <!-- Listado productos -->
        <div class="col-lg-8 col-md-7">
          <h2 class="carrito-title mb-4-light">Mi carrito de compras</h2>
          <div id="carrito-lista">
            <!-- Los productos agregados se renderizan aquí dinámicamente con JS -->
          </div>
        </div>
        <!-- Resumen carrito -->
        <div class="col-lg-4 col-md-5">
          <div class="carrito-resumen mt-4 mt-md-0">
            <div class="carrito-total">
              <span>TOTAL:</span>
              <span id="total">$ 0</span>
            </div>
            <!-- VALIDACIÓN DUOCUC Y DESCUENTO -->
            <div id="duoc-validacion" class="mt-2"></div>
            <div id="descuento" class="text-success"></div>
            <!-- FIN VALIDACIÓN DUOCUC Y DESCUENTO -->
            <div class="carrito-cupon">
              <input type="text" placeholder="Ingrese el cupón de descuento" id="input-cupon">
              <button id="btn-aplicar-cupon">APLICAR</button>
            </div>
            <button class="carrito-pagar" onclick="checkout()">PAGAR</button>
          </div>
        </div>
      </div>
    </main>

    <footer class="bg-dark border-top border-secondary py-3 mt-5 text-white">
        <div class="container d-flex flex-wrap justify-content-between align-items-center">
        <div>
            <span class="fw-bold font-orbitron fs-5 text-neon">Level-Up Gamer</span>
            <div class="mt-3">
            <img src="../img/visa.png" width="32" alt="Visa" class="me-2">
            <img src="../img/mastercard.png" width="32" alt="Mastercard" class="me-2">
            <img src="../img/paypal.png" width="32" alt="Paypal">
            </div>
        </div>
        <div class="d-flex flex-column align-items-end">
            <a 
            href="https://wa.me/56984977053" 
            target="_blank" 
            rel="noopener" 
            class="btn btn-success btn-whatsapp-footer d-flex align-items-center mb-2"
            style="background-color:#39FF14;border-color:#39FF14;color:#000;font-weight:bold;">
            <i class="bi bi-whatsapp me-2 fs-5"></i> Soporte Técnico (WhatsApp)
            </a>
            <span class="text-secondary small">¿Dudas o problemas? ¡Contáctanos!</span>
        </div>
        </div>
        <div class="text-center mt-3 text-secondary"><small>© 2025 Level-Up Gamer — Despachos a todo Chile</small></div>
    </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/funciones.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Usando las funciones del JS centralizado
      if (typeof cargarCarrito === "function") cargarCarrito();
      if (typeof actualizarBadgeCarrito === "function") actualizarBadgeCarrito();
      if (typeof renderCarrito === "function") renderCarrito();
    });
    document.addEventListener("DOMContentLoaded", function() {
      // Si existe el detalle de producto en la página
      if (typeof renderDetalleProducto === "function") renderDetalleProducto();
      // Actualiza el badge del carrito
      if (typeof actualizarBadgeCarrito === "function") actualizarBadgeCarrito();
    });
  </script>
</body>
</html>